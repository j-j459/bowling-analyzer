# ボーリング分析アプリ - UI設計書

## アプリコンセプト
ボーリングのスコア写真を撮影・保存し、ユーザーの得意・苦手なピン配置やパターンを分析・可視化するモバイルアプリ。

## デザイン方針
- **iOS Human Interface Guidelines (HIG)** に準拠
- **縦向き（9:16）** のモバイル画面を想定
- **片手操作** を考慮したUI配置
- シンプルで直感的な操作フロー

## カラースキーム
- **Primary（アクセント）**: `#0a7ea4` - ボーリングボールの青を連想させる色
- **Background**: Light `#ffffff` / Dark `#151718`
- **Surface（カード）**: Light `#f5f5f5` / Dark `#1e2022`
- **Foreground（テキスト）**: Light `#11181C` / Dark `#ECEDEE`
- **Success**: スペア・ストライク成功時の表示
- **Warning**: 改善が必要なエリアの表示
- **Error**: エラー状態の表示

## 画面構成

### 1. ホーム画面（Home）
**主要コンテンツ:**
- 最近のスコア一覧（カード形式）
  - 日付、場所、スコア、ゲーム数を表示
  - タップで詳細画面へ遷移
- 「新しいスコアを追加」ボタン（画面下部に固定）
  - カメラアイコン付き
  - タップでスコア登録画面へ

**機能:**
- Pull-to-refresh で最新データを取得
- 空の状態では「スコアを追加して分析を開始しましょう」メッセージを表示

### 2. スコア登録画面（Add Score）
**主要コンテンツ:**
- カメラプレビュー（全画面）
- シャッターボタン（画面下部中央）
- 撮影後の確認画面
  - 撮影した画像のプレビュー
  - 「再撮影」ボタン
  - 「保存」ボタン
- 手動入力オプション
  - 日付選択
  - 場所入力（テキストフィールド）
  - スコア入力（数値）

**ユーザーフロー:**
1. ホーム画面から「新しいスコアを追加」をタップ
2. カメラ画面が表示される
3. スコア表示画面を撮影
4. 撮影した画像を確認
5. AI が自動的にスコアを認識（ローディング表示）
6. 認識結果を確認・編集
7. 「保存」をタップして完了

### 3. スコア詳細画面（Score Detail）
**主要コンテンツ:**
- スコア画像（上部に大きく表示）
- 基本情報カード
  - 日付
  - 場所
  - 合計スコア
  - ゲーム数
- フレーム別詳細（スクロール可能）
  - 各フレームのスコア
  - スペア/ストライクのマーク
- 編集・削除ボタン

### 4. 分析画面（Analytics）
**主要コンテンツ:**
- 統計サマリーカード
  - 平均スコア
  - 最高スコア
  - ストライク率
  - スペア率
- グラフ表示
  - スコア推移（折れ線グラフ）
  - ピン配置別成功率（バーチャート）
- 得意・苦手パターン分析
  - 「得意なピン配置 TOP 3」
  - 「改善が必要なピン配置 TOP 3」
  - 各項目にアイコンと成功率を表示

**機能:**
- 期間フィルター（全期間、過去1ヶ月、過去3ヶ月）
- タブ切り替え（概要、詳細分析）

### 5. 設定画面（Settings）
**主要コンテンツ:**
- ユーザー情報
  - ログイン状態（将来的な拡張用）
- アプリ設定
  - ダークモード切り替え
  - 通知設定
- データ管理
  - データエクスポート
  - データ削除
- アプリ情報
  - バージョン情報
  - 利用規約
  - プライバシーポリシー

## タブバー構成
1. **ホーム** - `house.fill` アイコン
2. **分析** - `chart.bar.fill` アイコン
3. **設定** - `gearshape.fill` アイコン

## 主要ユーザーフロー

### スコア登録フロー
```
ホーム → 「新しいスコアを追加」タップ → カメラ画面 → 撮影 → 
確認画面 → AI認識（自動） → 結果確認・編集 → 保存 → ホームに戻る
```

### 分析閲覧フロー
```
分析タブをタップ → 統計サマリー表示 → グラフをスクロール → 
得意・苦手パターンを確認 → 期間フィルター変更（オプション）
```

### スコア詳細閲覧フロー
```
ホーム → スコアカードをタップ → 詳細画面 → 
画像・基本情報・フレーム詳細を確認 → 編集/削除（オプション）
```

## インタラクションデザイン

### フィードバック
- **ボタンタップ**: Scale 0.97 + Light Haptic
- **リストアイテムタップ**: Opacity 0.7
- **スコア保存成功**: Success Haptic + トーストメッセージ
- **エラー発生**: Error Haptic + エラーメッセージ

### アニメーション
- 画面遷移: 250ms のフェードイン
- カード表示: 200ms のスライドイン
- ローディング: スピナー + 「分析中...」テキスト

## データ構造（概要）

### Score（スコアデータ）
- id: 一意識別子
- userId: ユーザーID
- imageUrl: 撮影した画像のURL
- date: 日付
- location: 場所
- totalScore: 合計スコア
- frames: フレーム別詳細（JSON）
- createdAt: 作成日時

### Frame（フレームデータ）
- frameNumber: フレーム番号（1-10）
- firstThrow: 1投目のピン数
- secondThrow: 2投目のピン数
- score: フレームスコア
- isStrike: ストライクフラグ
- isSpare: スペアフラグ

## 技術的考慮事項

### 画像認識
- サーバーサイドの LLM を使用してスコア画像を解析
- OCR + パターン認識でフレーム別スコアを抽出
- 認識精度が低い場合は手動編集を促す

### データ保存
- 初期バージョンは AsyncStorage でローカル保存
- 将来的にはバックエンド + データベースで複数デバイス同期

### パフォーマンス
- 画像は圧縮してから保存
- 分析画面のグラフは遅延読み込み
- FlatList を使用してスクロールパフォーマンスを最適化
